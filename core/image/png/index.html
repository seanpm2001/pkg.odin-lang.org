<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>package image/png - pkg.odin-lang.org</title>	<link rel="icon" href="/favicon.svg">
	<link rel="stylesheet" type="text/css" href="https://odin-lang.org/scss/custom.min.css">
	<link rel=stylesheet href="//odin-lang.org/lib/highlight/styles/github-dark.min.css">
	<script src="//odin-lang.org/lib/highlight/highlight.min.js"></script>

	<script>hljs.registerLanguage("odin",function(a){return{aliases:["odin","odinlang","odin-lang"],keywords:{keyword:"auto_cast bit_set break case cast context continue defer distinct do dynamic else enum fallthrough for foreign if import in map not_in or_else or_return package proc return struct switch transmute type_of typeid union using when where",literal:"true false nil",built_in:"abs align_of cap clamp complex conj expand_to_tuple imag jmag kmag len max min offset_of quaternion real size_of soa_unzip soa_zip swizzle type_info_of type_of typeid_of"},illegal:"</",contains:[a.C_LINE_COMMENT_MODE,a.C_BLOCK_COMMENT_MODE,{className:"string",variants:[a.QUOTE_STRING_MODE,{begin:"'",end:"[^\\\\]'"},{begin:"`",end:"`"}]},{className:"number",variants:[{begin:a.C_NUMBER_RE+"[ijk]",relevance:1},a.C_NUMBER_MODE]}]}})</script>
	<script>hljs.highlightAll()</script>
	<script>
		function toggleDarkMode() {
			if (document.body.classList.toggle("dark-mode")) {
				window.localStorage.setItem("theme", "dark");
			} else {
				window.localStorage.setItem("theme", "light");
			}
		}
	</script>
	<link rel="stylesheet" type="text/css" href="https://odin-lang.org/css/style.css">

	<link rel="stylesheet" type="text/css" href="/style.css">

	</style>
</head>
<body>
<script>
	if (window.localStorage.getItem("theme") === "dark")
		document.body.classList.add("dark-mode");
	else
		document.body.classList.remove("dark-mode");
</script>
<header class="sticky-top">
	<nav class="navbar navbar-expand-lg navbar-dark bg-primary odin-menu">
		<div class="container">
			<a class="navbar-brand" href="https://odin-lang.org/">
			<img src="https://odin-lang.org/logo.svg" height="30" alt="Odin"></a>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#odin-navbar-content" aria-controls="odin-navbar-content" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
			<div class="collapse navbar-collapse" id="odin-navbar-content">
			<ul class="navbar-nav ms-md-auto">
				<li class="nav-item"><a class="nav-link" href="https://odin-lang.org/">Home</a></li>
				<li class="nav-item"><a class="nav-link" href="https://odin-lang.org/docs">Docs</a></li>
				<li class="nav-item"><a class="nav-link active" href="/">Packages</a></li>
				<li class="nav-item"><a class="nav-link" href="https://odin-lang.org/news">News</a></li>
				<li class="nav-item"><a class="nav-link" href="https://odin-lang.org/showcase">Showcase</a></li>
				<li class="nav-item"><a class="nav-link" href="https://odin-lang.org/community">Community</a></li>
				<li class="nav-item"><a class="nav-link" href="https://github.com/odin-lang/Odin" target="_blank">GitHub</a></li>
				<li class="nav-item">
					<a
						class="nav-link btn-dark-mode"
						onclick="toggleDarkMode();"
						title="Toggle Light/Dark Mode"
					>
						<span class="dark-mode-appearance">Appearance:</span>
						<svg fill="white" id="dark-mode-icon" viewBox="0 0 384 512"><path d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"/></svg>
						<svg fill="white" id="light-mode-icon" viewBox="0 0 16 16">
						  <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"/>
						</svg>
					</button>
					</a>
				</li>
			</ul>
		</div>
		</div>
	</nav>
</header>
<main>
<div class="container full-width">
<div class="row odin-main my-4" id="pkg">
<nav id="pkg-sidebar" class="col-lg-2 odin-sidebar-border navbar-light sticky-top odin-below-navbar">
<div class="py-3">
<h4><a style="text-transform: capitalize; color: inherit;" href="/core">core Library</a></h4>
<ul>
<li class="nav-item"><a href="/core/bufio">bufio</a></li>
<li class="nav-item"><a href="/core/bytes">bytes</a></li>
<li class="nav-item"><a href="/core/c">c</a><ul>
<li><a href="/core/c/frontend/preprocessor">frontend/preprocessor</a></li>
<li><a href="/core/c/frontend/tokenizer">frontend/tokenizer</a></li>
<li><a href="/core/c/libc">libc</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/compress">compress</a><ul>
<li><a href="/core/compress/gzip">gzip</a></li>
<li><a href="/core/compress/shoco">shoco</a></li>
<li><a href="/core/compress/zlib">zlib</a></li>
</ul>

</li>
<li class="nav-item">container<ul>
<li><a href="/core/container/avl">avl</a></li>
<li><a href="/core/container/bit_array">bit_array</a></li>
<li><a href="/core/container/intrusive/list">intrusive/list</a></li>
<li><a href="/core/container/lru">lru</a></li>
<li><a href="/core/container/priority_queue">priority_queue</a></li>
<li><a href="/core/container/queue">queue</a></li>
<li><a href="/core/container/rbtree">rbtree</a></li>
<li><a href="/core/container/small_array">small_array</a></li>
<li><a href="/core/container/topological_sort">topological_sort</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/crypto">crypto</a><ul>
<li><a href="/core/crypto/aead">aead</a></li>
<li><a href="/core/crypto/aes">aes</a></li>
<li><a href="/core/crypto/blake2b">blake2b</a></li>
<li><a href="/core/crypto/blake2s">blake2s</a></li>
<li><a href="/core/crypto/chacha20">chacha20</a></li>
<li><a href="/core/crypto/chacha20poly1305">chacha20poly1305</a></li>
<li><a href="/core/crypto/ed25519">ed25519</a></li>
<li><a href="/core/crypto/hash">hash</a></li>
<li><a href="/core/crypto/hkdf">hkdf</a></li>
<li><a href="/core/crypto/hmac">hmac</a></li>
<li><a href="/core/crypto/kmac">kmac</a></li>
<li><a href="/core/crypto/legacy/keccak">legacy/keccak</a></li>
<li><a href="/core/crypto/legacy/md5">legacy/md5</a></li>
<li><a href="/core/crypto/legacy/sha1">legacy/sha1</a></li>
<li><a href="/core/crypto/pbkdf2">pbkdf2</a></li>
<li><a href="/core/crypto/poly1305">poly1305</a></li>
<li><a href="/core/crypto/ristretto255">ristretto255</a></li>
<li><a href="/core/crypto/sha2">sha2</a></li>
<li><a href="/core/crypto/sha3">sha3</a></li>
<li><a href="/core/crypto/shake">shake</a></li>
<li><a href="/core/crypto/sm3">sm3</a></li>
<li><a href="/core/crypto/tuplehash">tuplehash</a></li>
<li><a href="/core/crypto/x25519">x25519</a></li>
</ul>

</li>
<li class="nav-item">debug<ul>
<li><a href="/core/debug/pe">pe</a></li>
<li><a href="/core/debug/trace">trace</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/dynlib">dynlib</a></li>
<li class="nav-item">encoding<ul>
<li><a href="/core/encoding/ansi">ansi</a></li>
<li><a href="/core/encoding/base32">base32</a></li>
<li><a href="/core/encoding/base64">base64</a></li>
<li><a href="/core/encoding/cbor">cbor</a></li>
<li><a href="/core/encoding/csv">csv</a></li>
<li><a href="/core/encoding/endian">endian</a></li>
<li><a href="/core/encoding/entity">entity</a></li>
<li><a href="/core/encoding/hex">hex</a></li>
<li><a href="/core/encoding/hxa">hxa</a></li>
<li><a href="/core/encoding/ini">ini</a></li>
<li><a href="/core/encoding/json">json</a></li>
<li><a href="/core/encoding/uuid">uuid</a></li>
<li><a href="/core/encoding/uuid/legacy">uuid/legacy</a></li>
<li><a href="/core/encoding/varint">varint</a></li>
<li><a href="/core/encoding/xml">xml</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/flags">flags</a></li>
<li class="nav-item"><a href="/core/fmt">fmt</a></li>
<li class="nav-item"><a href="/core/hash">hash</a><ul>
<li><a href="/core/hash/xxhash">xxhash</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/image">image</a><ul>
<li><a href="/core/image/bmp">bmp</a></li>
<li><a href="/core/image/netpbm">netpbm</a></li>
<li><a class="active" href="/core/image/png">png</a></li>
<li><a href="/core/image/qoi">qoi</a></li>
<li><a href="/core/image/tga">tga</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/io">io</a></li>
<li class="nav-item"><a href="/core/log">log</a></li>
<li class="nav-item"><a href="/core/math">math</a><ul>
<li><a href="/core/math/big">big</a></li>
<li><a href="/core/math/bits">bits</a></li>
<li><a href="/core/math/cmplx">cmplx</a></li>
<li><a href="/core/math/ease">ease</a></li>
<li><a href="/core/math/fixed">fixed</a></li>
<li><a href="/core/math/linalg">linalg</a></li>
<li><a href="/core/math/linalg/glsl">linalg/glsl</a></li>
<li><a href="/core/math/linalg/hlsl">linalg/hlsl</a></li>
<li><a href="/core/math/noise">noise</a></li>
<li><a href="/core/math/rand">rand</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/mem">mem</a><ul>
<li><a href="/core/mem/tlsf">tlsf</a></li>
<li><a href="/core/mem/virtual">virtual</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/net">net</a></li>
<li class="nav-item">odin<ul>
<li><a href="/core/odin/ast">ast</a></li>
<li><a href="/core/odin/doc-format">doc-format</a></li>
<li><a href="/core/odin/parser">parser</a></li>
<li><a href="/core/odin/tokenizer">tokenizer</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/os">os</a></li>
<li class="nav-item">path<ul>
<li><a href="/core/path/filepath">filepath</a></li>
<li><a href="/core/path/slashpath">slashpath</a></li>
</ul>

</li>
<li class="nav-item">prof<ul>
<li><a href="/core/prof/spall">spall</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/reflect">reflect</a></li>
<li class="nav-item"><a href="/core/relative">relative</a></li>
<li class="nav-item"><a href="/core/simd">simd</a><ul>
<li><a href="/core/simd/x86">x86</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/slice">slice</a><ul>
<li><a href="/core/slice/heap">heap</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/sort">sort</a></li>
<li class="nav-item"><a href="/core/strconv">strconv</a><ul>
<li><a href="/core/strconv/decimal">decimal</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/strings">strings</a></li>
<li class="nav-item"><a href="/core/sync">sync</a><ul>
<li><a href="/core/sync/chan">chan</a></li>
</ul>

</li>
<li class="nav-item">sys<ul>
<li><a href="/core/sys/darwin">darwin</a></li>
<li><a href="/core/sys/darwin/Foundation">darwin/Foundation</a></li>
<li><a href="/core/sys/haiku">haiku</a></li>
<li><a href="/core/sys/info">info</a></li>
<li><a href="/core/sys/linux">linux</a></li>
<li><a href="/core/sys/orca">orca</a></li>
<li><a href="/core/sys/posix">posix</a></li>
<li><a href="/core/sys/unix">unix</a></li>
<li><a href="/core/sys/valgrind">valgrind</a></li>
<li><a href="/core/sys/windows">windows</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/testing">testing</a></li>
<li class="nav-item">text<ul>
<li><a href="/core/text/edit">edit</a></li>
<li><a href="/core/text/i18n">i18n</a></li>
<li><a href="/core/text/match">match</a></li>
<li><a href="/core/text/regex">regex</a></li>
<li><a href="/core/text/regex/common">regex/common</a></li>
<li><a href="/core/text/regex/compiler">regex/compiler</a></li>
<li><a href="/core/text/regex/optimizer">regex/optimizer</a></li>
<li><a href="/core/text/regex/parser">regex/parser</a></li>
<li><a href="/core/text/regex/tokenizer">regex/tokenizer</a></li>
<li><a href="/core/text/regex/virtual_machine">regex/virtual_machine</a></li>
<li><a href="/core/text/scanner">scanner</a></li>
<li><a href="/core/text/table">table</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/thread">thread</a></li>
<li class="nav-item"><a href="/core/time">time</a><ul>
<li><a href="/core/time/datetime">datetime</a></li>
</ul>

</li>
<li class="nav-item"><a href="/core/unicode">unicode</a><ul>
<li><a href="/core/unicode/utf16">utf16</a></li>
<li><a href="/core/unicode/utf8">utf8</a></li>
<li><a href="/core/unicode/utf8/utf8string">utf8/utf8string</a></li>
</ul>

</li>
</ul>
</div>
</nav>
<article class="col-lg-8 p-4 documentation odin-article">
<nav class="pkg-breadcrumb" aria-label="breadcrumb">
<ol class="breadcrumb">
<li class="breadcrumb-item"><a href="/core">core</a></li>
<li class="breadcrumb-item"><a href="/core/image">image</a></li>
<li class="breadcrumb-item active" aria-current="page"><a href="/core/image/png">png</a></li>
</ol>
</nav>
<h1>package core:image/png<div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png"><em>Source</em></a></div></h1>

		<div class="odin-search-wrapper">
			<input type="search" id="odin-search" class="odin-search-package" autocomplete="off" spellcheck="false" placeholder="Fuzzy Search...">
			<div class="odin-search-shortcut">
				<div class="odin-search-key key-macos">⌘K</div>
				<div class="odin-search-key key-windows">Ctrl+K</div>
				<span class="odin-search-or">or</span>
				<div class="odin-search-key">/</div>
			</div>
		</div>
	
<div id="odin-search-info">
<div id="odin-search-time"></div>

		<div id="odin-search-options">
			<input type="checkbox" id="odin-search-filter" name="odin-search-filter">
			<label for="odin-search-filter">Filter Results</label>
		</div>
</div>
<ul id="odin-search-results"></ul>
<div id="pkg-top">
<h2>Overview</h2>
<div id="pkg-overview">
<p>package png implements a PNG image reader</p>
<p>The PNG specification is at <a href="https://www.w3.org/TR/PNG/">https://www.w3.org/TR/PNG/</a>.</p>
<details open class="code-example">
<summary><b>Example:</b></summary>
<pre><code class="hljs language-odin" data-lang="odin">package main

import "core:image"
// import "core:image/png"
import "core:bytes"
import "core:fmt"

// For PPM writer
import "core:mem"
import "core:os"

main :: proc() {
	track := mem.Tracking_Allocator{}
	mem.tracking_allocator_init(&track, context.allocator)

	context.allocator = mem.tracking_allocator(&track)

	demo()

	if len(track.allocation_map) &gt; 0 {
		fmt.println("Leaks:")
		for _, v in track.allocation_map {
			fmt.printf("\t%v\n\n", v)
		}
	}
}

demo :: proc() {
	file: string

	options := image.Options{.return_metadata}
	err:       image.Error
	img:      ^image.Image

	file = "../../../misc/logo-slim.png"

	img, err = load(file, options)
	defer destroy(img)

	if err != nil {
		fmt.printf("Trying to read PNG file %v returned %v\n", file, err)
	} else {
		fmt.printf("Image: %vx%vx%v, %v-bit.\n", img.width, img.height, img.channels, img.depth)

		if v, ok := img.metadata.(^image.PNG_Info); ok {
			// Handle ancillary chunks as you wish.
			// We provide helper functions for a few types.
			for c in v.chunks {
				#partial switch c.header.type {
				case .tIME:
					if t, t_ok := core_time(c); t_ok {
						fmt.printf("[tIME]: %v\n", t)
					}
				case .gAMA:
					if gama, gama_ok := gamma(c); gama_ok {
						fmt.printf("[gAMA]: %v\n", gama)
					}
				case .pHYs:
					if phys, phys_ok := phys(c); phys_ok {
						if phys.unit == .Meter {
							xm    := f32(img.width)  / f32(phys.ppu_x)
							ym    := f32(img.height) / f32(phys.ppu_y)
							dpi_x, dpi_y := phys_to_dpi(phys)
							fmt.printf("[pHYs] Image resolution is %v x %v pixels per meter.\n", phys.ppu_x, phys.ppu_y)
							fmt.printf("[pHYs] Image resolution is %v x %v DPI.\n", dpi_x, dpi_y)
							fmt.printf("[pHYs] Image dimensions are %v x %v meters.\n", xm, ym)
						} else {
							fmt.printf("[pHYs] x: %v, y: %v pixels per unknown unit.\n", phys.ppu_x, phys.ppu_y)
						}
					}
				case .iTXt, .zTXt, .tEXt:
					res, ok_text := text(c)
					if ok_text {
						if c.header.type == .iTXt {
							fmt.printf("[iTXt] %v (%v:%v): %v\n", res.keyword, res.language, res.keyword_localized, res.text)
						} else {
							fmt.printf("[tEXt/zTXt] %v: %v\n", res.keyword, res.text)
						}
					}
					defer text_destroy(res)
				case .bKGD:
					fmt.printf("[bKGD] %v\n", img.background)
				case .eXIf:
					if res, ok_exif := exif(c); ok_exif {
						/*
							Other than checking the signature and byte order, we don't handle Exif data.
							If you wish to interpret it, pass it to an Exif parser.
						*/
						fmt.printf("[eXIf] %v\n", res)
					}
				case .PLTE:
					if plte, plte_ok := plte(c); plte_ok {
						fmt.printf("[PLTE] %v\n", plte)
					} else {
						fmt.printf("[PLTE] Error\n")
					}
				case .hIST:
					if res, ok_hist := hist(c); ok_hist {
						fmt.printf("[hIST] %v\n", res)
					}
				case .cHRM:
					if res, ok_chrm := chrm(c); ok_chrm {
						fmt.printf("[cHRM] %v\n", res)
					}
				case .sPLT:
					res, ok_splt := splt(c)
					if ok_splt {
						fmt.printf("[sPLT] %v\n", res)
					}
					splt_destroy(res)
				case .sBIT:
					if res, ok_sbit := sbit(c); ok_sbit {
						fmt.printf("[sBIT] %v\n", res)
					}
				case .iCCP:
					res, ok_iccp := iccp(c)
					if ok_iccp {
						fmt.printf("[iCCP] %v\n", res)
					}
					iccp_destroy(res)
				case .sRGB:
					if res, ok_srgb := srgb(c); ok_srgb {
						fmt.printf("[sRGB] Rendering intent: %v\n", res)
					}
				case:
					type := c.header.type
					name := chunk_type_to_name(&type)
					fmt.printf("[%v]: %v\n", name, c.data)
				}
			}
		}
	}

	fmt.printf("Done parsing metadata.\n")

	if err == nil && .do_not_decompress_image not_in options && .info not_in options {
		if ok := write_image_as_ppm("out.ppm", img); ok {
			fmt.println("Saved decoded image.")
		} else {
			fmt.println("Error saving out.ppm.")
			fmt.println(img)
		}
	}
}

// Crappy PPM writer used during testing. Don't use in production.
write_image_as_ppm :: proc(filename: string, image: ^image.Image) -&gt; (success: bool) {

	_bg :: proc(bg: Maybe([3]u16), x, y: int, high := true) -&gt; (res: [3]u16) {
		if v, ok := bg.?; ok {
			res = v
		} else {
			if high {
				l := u16(30 * 256 + 30)

				if (x & 4 == 0) ~ (y & 4 == 0) {
					res = [3]u16{l, 0, l}
				} else {
					res = [3]u16{l &gt;&gt; 1, 0, l &gt;&gt; 1}
				}
			} else {
				if (x & 4 == 0) ~ (y & 4 == 0) {
					res = [3]u16{30, 30, 30}
				} else {
					res = [3]u16{15, 15, 15}
				}
			}
		}
		return
	}

	// profiler.timed_proc();
	using image
	using os

	flags: int = O_WRONLY|O_CREATE|O_TRUNC

	img := image

	// PBM 16-bit images are big endian
	when ODIN_ENDIAN == .Little {
		if img.depth == 16 {
			// The pixel components are in Big Endian. Let's byteswap back.
			input  := mem.slice_data_cast([]u16,   img.pixels.buf[:])
			output := mem.slice_data_cast([]u16be, img.pixels.buf[:])
			#no_bounds_check for v, i in input {
				output[i] = u16be(v)
			}
		}
	}

	pix := bytes.buffer_to_bytes(&img.pixels)

	if len(pix) == 0 || len(pix) &lt; image.width * image.height * int(image.channels) {
		return false
	}

	mode: int = 0
	when ODIN_OS == .Linux || ODIN_OS == .Darwin {
		// NOTE(justasd): 644 (owner read, write; group read; others read)
		mode = S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH
	}

	fd, err := open(filename, flags, mode)
	if err != nil {
		return false
	}
	defer close(fd)

	write_string(fd,
		fmt.tprintf("P6\n%v %v\n%v\n", width, height, uint(1 &lt;&lt; uint(depth) - 1)),
	)

	if channels == 3 {
		// We don't handle transparency here...
		write_ptr(fd, raw_data(pix), len(pix))
	} else {
		bpp := depth == 16 ? 2 : 1
		bytes_needed := width * height * 3 * bpp

		op := bytes.Buffer{}
		bytes.buffer_init_allocator(&op, bytes_needed, bytes_needed)
		defer bytes.buffer_destroy(&op)

		if channels == 1 {
			if depth == 16 {
				assert(len(pix) == width * height * 2)
				p16 := mem.slice_data_cast([]u16, pix)
				o16 := mem.slice_data_cast([]u16, op.buf[:])
				#no_bounds_check for len(p16) != 0 {
					r := u16(p16[0])
					o16[0] = r
					o16[1] = r
					o16[2] = r
					p16 = p16[1:]
					o16 = o16[3:]
				}
			} else {
				o := 0
				for i := 0; i &lt; len(pix); i += 1 {
					r := pix[i]
					op.buf[o  ] = r
					op.buf[o+1] = r
					op.buf[o+2] = r
					o += 3
				}
			}
			write_ptr(fd, raw_data(op.buf), len(op.buf))
		} else if channels == 2 {
			if depth == 16 {
				p16 := mem.slice_data_cast([]u16, pix)
				o16 := mem.slice_data_cast([]u16, op.buf[:])

				bgcol := img.background

				#no_bounds_check for len(p16) != 0 {
					r  := f64(u16(p16[0]))
					bg:   f64
					if bgcol != nil {
						v := bgcol.([3]u16)[0]
						bg = f64(v)
					}
					a  := f64(u16(p16[1])) / 65535.0
					l  := (a * r) + (1 - a) * bg

					o16[0] = u16(l)
					o16[1] = u16(l)
					o16[2] = u16(l)

					p16 = p16[2:]
					o16 = o16[3:]
				}
			} else {
				o := 0
				for i := 0; i &lt; len(pix); i += 2 {
					r := pix[i]; a := pix[i+1]; a1 := f32(a) / 255.0
					c := u8(f32(r) * a1)
					op.buf[o  ] = c
					op.buf[o+1] = c
					op.buf[o+2] = c
					o += 3
				}
			}
			write_ptr(fd, raw_data(op.buf), len(op.buf))
		} else if channels == 4 {
			if depth == 16 {
				p16 := mem.slice_data_cast([]u16be, pix)
				o16 := mem.slice_data_cast([]u16be, op.buf[:])

				#no_bounds_check for len(p16) != 0 {

					bg := _bg(img.background, 0, 0)
					r     := f32(p16[0])
					g     := f32(p16[1])
					b     := f32(p16[2])
					a     := f32(p16[3]) / 65535.0

					lr  := (a * r) + (1 - a) * f32(bg[0])
					lg  := (a * g) + (1 - a) * f32(bg[1])
					lb  := (a * b) + (1 - a) * f32(bg[2])

					o16[0] = u16be(lr)
					o16[1] = u16be(lg)
					o16[2] = u16be(lb)

					p16 = p16[4:]
					o16 = o16[3:]
				}
			} else {
				o := 0

				for i := 0; i &lt; len(pix); i += 4 {

					x := (i / 4)  % width
					y := i / width / 4

					_b := _bg(img.background, x, y, false)
					bgcol := [3]u8{u8(_b[0]), u8(_b[1]), u8(_b[2])}

					r := f32(pix[i])
					g := f32(pix[i+1])
					b := f32(pix[i+2])
					a := f32(pix[i+3]) / 255.0

					lr := u8(f32(r) * a + (1 - a) * f32(bgcol[0]))
					lg := u8(f32(g) * a + (1 - a) * f32(bgcol[1]))
					lb := u8(f32(b) * a + (1 - a) * f32(bgcol[2]))
					op.buf[o  ] = lr
					op.buf[o+1] = lg
					op.buf[o+2] = lb
					o += 3
				}
			}
			write_ptr(fd, raw_data(op.buf), len(op.buf))
		} else {
			return false
		}
	}
	return true
}

Copyright 2021 Jeroen van Rijn &lt;nom@duclavier.com&gt;.
Made available under Odin's BSD-2 license.

List of contributors:
	Jeroen van Rijn: Initial implementation.
	Ginger Bill:     Cosmetic changes.

These are a few useful utility functions to work with PNG images.

Copyright 2021 Jeroen van Rijn &lt;nom@duclavier.com&gt;.
Made available under Odin's BSD-3 license.

List of contributors:
	Jeroen van Rijn: Initial implementation.
	Ginger Bill:     Cosmetic changes.
</code></pre>
</details>
</div>
<div id="pkg-index">
<h2>Index</h2>
<div>
<details class="doc-index" id="doc-index-Types" aria-labelledby="#doc-index-Types-header">
<summary id="#doc-index-Types-header">
Types (23)</summary>
<ul>
<li><a href="#CIE_1931">CIE_1931</a></li>
<li><a href="#CIE_1931_Raw">CIE_1931_Raw</a></li>
<li><a href="#Error">Error</a></li>
<li><a href="#Exif">Exif</a></li>
<li><a href="#Filter_Params">Filter_Params</a></li>
<li><a href="#Image">Image</a></li>
<li><a href="#Options">Options</a></li>
<li><a href="#PLTE">PLTE</a></li>
<li><a href="#PLTE_Entry">PLTE_Entry</a></li>
<li><a href="#Row_Filter">Row_Filter</a></li>
<li><a href="#Signature">Signature</a></li>
<li><a href="#Text">Text</a></li>
<li><a href="#cHRM">cHRM</a></li>
<li><a href="#cHRM_Raw">cHRM_Raw</a></li>
<li><a href="#gAMA">gAMA</a></li>
<li><a href="#hIST">hIST</a></li>
<li><a href="#iCCP">iCCP</a></li>
<li><a href="#pHYs">pHYs</a></li>
<li><a href="#pHYs_Unit">pHYs_Unit</a></li>
<li><a href="#sPLT">sPLT</a></li>
<li><a href="#sRGB">sRGB</a></li>
<li><a href="#sRGB_Rendering_Intent">sRGB_Rendering_Intent</a></li>
<li><a href="#tIME">tIME</a></li>
</ul>
</details>
</div>
<div>
<details class="doc-index" id="doc-index-Constants" aria-labelledby="#doc-index-Constants-header">
<summary id="#doc-index-Constants-header">
Constants (4)</summary>
<ul>
<li><a href="#INCHES_PER_METER">INCHES_PER_METER</a></li>
<li><a href="#MAX_CHUNK_SIZE">MAX_CHUNK_SIZE</a></li>
<li><a href="#MAX_IDAT_SIZE">MAX_IDAT_SIZE</a></li>
<li><a href="#depth_scale_table">depth_scale_table</a></li>
</ul>
</details>
</div>
<div>
<details class="doc-index" id="doc-index-Variables" aria-labelledby="#doc-index-Variables-header">
<summary id="#doc-index-Variables-header">
Variables (4)</summary>
<ul>
<li><a href="#ADAM7_X_ORIG">ADAM7_X_ORIG</a></li>
<li><a href="#ADAM7_X_SPACING">ADAM7_X_SPACING</a></li>
<li><a href="#ADAM7_Y_ORIG">ADAM7_Y_ORIG</a></li>
<li><a href="#ADAM7_Y_SPACING">ADAM7_Y_SPACING</a></li>
</ul>
</details>
</div>
<div>
<details class="doc-index" id="doc-index-Procedures" aria-labelledby="#doc-index-Procedures-header">
<summary id="#doc-index-Procedures-header">
Procedures (31)</summary>
<ul>
<li><a href="#append_chunk">append_chunk</a></li>
<li><a href="#chrm">chrm</a></li>
<li><a href="#chunk_type_to_name">chunk_type_to_name</a></li>
<li><a href="#copy_chunk">copy_chunk</a></li>
<li><a href="#core_time">core_time</a></li>
<li><a href="#defilter">defilter</a></li>
<li><a href="#defilter_16">defilter_16</a></li>
<li><a href="#defilter_8">defilter_8</a></li>
<li><a href="#defilter_less_than_8">defilter_less_than_8</a></li>
<li><a href="#destroy">destroy</a></li>
<li><a href="#exif">exif</a></li>
<li><a href="#filter_paeth">filter_paeth</a></li>
<li><a href="#gamma">gamma</a></li>
<li><a href="#hist">hist</a></li>
<li><a href="#iccp">iccp</a></li>
<li><a href="#iccp_destroy">iccp_destroy</a></li>
<li><a href="#load_from_bytes">load_from_bytes</a></li>
<li><a href="#load_from_context">load_from_context</a></li>
<li><a href="#load_from_file">load_from_file</a></li>
<li><a href="#phys">phys</a></li>
<li><a href="#phys_to_dpi">phys_to_dpi</a></li>
<li><a href="#plte">plte</a></li>
<li><a href="#read_chunk">read_chunk</a></li>
<li><a href="#read_header">read_header</a></li>
<li><a href="#sbit">sbit</a></li>
<li><a href="#splt">splt</a></li>
<li><a href="#splt_destroy">splt_destroy</a></li>
<li><a href="#srgb">srgb</a></li>
<li><a href="#text">text</a></li>
<li><a href="#text_destroy">text_destroy</a></li>
<li><a href="#time">time</a></li>
</ul>
</details>
</div>
<div>
<details class="doc-index" id="doc-index-Procedure Groups" aria-labelledby="#doc-index-Procedure Groups-header">
<summary id="#doc-index-Procedure Groups-header">
Procedure Groups (1)</summary>
<ul>
<li><a href="#load">load</a></li>
</ul>
</details>
</div>
</div>
</div>
<section class="documentation">
<h2 id="pkg-Types" class="pkg-header">Types</h2>
<div class="pkg-entity">
<h3 id="CIE_1931"><span><a class="doc-id-link" href="#CIE_1931">CIE_1931<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L96"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">CIE_1931 :: <span class="keyword-type">struct</span> <span class="directive">#packed</span> {
	x: <a href="/base/builtin#f32"><span class="doc-builtin">f32</span></a>,
	y: <a href="/base/builtin#f32"><span class="doc-builtin">f32</span></a>,
}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="CIE_1931_Raw"><span><a class="doc-id-link" href="#CIE_1931_Raw">CIE_1931_Raw<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L91"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">CIE_1931_Raw :: <span class="keyword-type">struct</span> <span class="directive">#packed</span> {
	x: <a href="/base/builtin#u32be"><span class="doc-builtin">u32be</span></a>,
	y: <a href="/base/builtin#u32be"><span class="doc-builtin">u32be</span></a>,
}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="Error"><span><a class="doc-id-link" href="#Error">Error<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L41"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">Error :: image.<a class="code-typename" href="/core/image/#Error">Error</a></pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="Exif"><span><a class="doc-id-link" href="#Exif">Exif<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L141"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">Exif :: <span class="keyword-type">struct</span> {
	byte_order: <span class="keyword-type">enum</span> <a href="/base/builtin#int"><span class="doc-builtin">int</span></a> {
		little_endian, 
		big_endian, 
	},
	data:       []<a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a>,
}</pre>
</div>
<h5>Related Procedures With Returns</h5>
<ul>
<li><a href="/core/image/png/#exif">exif</a></li>
</ul>
</div>
<div class="pkg-entity">
<h3 id="Filter_Params"><span><a class="doc-id-link" href="#Filter_Params">Filter_Params<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L1203"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">Filter_Params :: <span class="keyword-type">struct</span> <span class="directive">#packed</span> {
	src:      []<a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a>,
	dest:     []<a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a>,
	width:    <a href="/base/builtin#int"><span class="doc-builtin">int</span></a>,
	height:   <a href="/base/builtin#int"><span class="doc-builtin">int</span></a>,
	depth:    <a href="/base/builtin#int"><span class="doc-builtin">int</span></a>,
	channels: <a href="/base/builtin#int"><span class="doc-builtin">int</span></a>,
	rescale:  <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a>,
}</pre>
</div>
<h5>Related Procedures With Parameters</h5>
<ul>
<li><a href="/core/image/png/#defilter_16">defilter_16</a></li>
<li><a href="/core/image/png/#defilter_8">defilter_8</a></li>
<li><a href="/core/image/png/#defilter_less_than_8">defilter_less_than_8</a></li>
</ul>
</div>
<div class="pkg-entity">
<h3 id="Image"><span><a class="doc-id-link" href="#Image">Image<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L42"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">Image :: image.<a class="code-typename" href="/core/image/#Image">Image</a></pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="Options"><span><a class="doc-id-link" href="#Options">Options<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L43"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">Options :: image.<a class="code-typename" href="/core/image/#Options">Options</a></pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="PLTE"><span><a class="doc-id-link" href="#PLTE">PLTE<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L60"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">PLTE :: <span class="keyword-type">struct</span> <span class="directive">#packed</span> {
	entries: [256][3]<a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a>,
	used:    <a href="/base/builtin#u16"><span class="doc-builtin">u16</span></a>,
}</pre>
</div>
<h5>Related Procedures With Returns</h5>
<ul>
<li><a href="/core/image/png/#plte">plte</a></li>
</ul>
</div>
<div class="pkg-entity">
<h3 id="PLTE_Entry"><span><a class="doc-id-link" href="#PLTE_Entry">PLTE_Entry<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L58"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">PLTE_Entry :: [3]<a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a></pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="Row_Filter"><span><a class="doc-id-link" href="#Row_Filter">Row_Filter<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L50"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">Row_Filter :: <span class="keyword-type">enum</span> <a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a> {
	None    = 0, 
	Sub     = 1, 
	Up      = 2, 
	Average = 3, 
	Paeth   = 4, 
}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="Signature"><span><a class="doc-id-link" href="#Signature">Signature<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L45"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">Signature :: <span class="keyword-type">enum</span> <a href="/base/builtin#u64be"><span class="doc-builtin">u64be</span></a> {
	<span class="comment">// 0x89504e470d0a1a0a</span>
	PNG = 9894494448401390090, 
}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="Text"><span><a class="doc-id-link" href="#Text">Text<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L134"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">Text :: <span class="keyword-type">struct</span> {
	keyword:           <a href="/base/builtin#string"><span class="doc-builtin">string</span></a>,
	keyword_localized: <a href="/base/builtin#string"><span class="doc-builtin">string</span></a>,
	language:          <a href="/base/builtin#string"><span class="doc-builtin">string</span></a>,
	text:              <a href="/base/builtin#string"><span class="doc-builtin">string</span></a>,
}</pre>
</div>
<h5>Related Procedures With Parameters</h5>
<ul>
<li><a href="/core/image/png/#text_destroy">text_destroy</a></li>
</ul>
<h5>Related Procedures With Returns</h5>
<ul>
<li><a href="/core/image/png/#text">text</a></li>
</ul>
</div>
<div class="pkg-entity">
<h3 id="cHRM"><span><a class="doc-id-link" href="#cHRM">cHRM<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L109"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">cHRM :: <span class="keyword-type">struct</span> <span class="directive">#packed</span> {
	w: <a class="code-typename" href="/core/image/png/#CIE_1931">CIE_1931</a>,
	r: <a class="code-typename" href="/core/image/png/#CIE_1931">CIE_1931</a>,
	g: <a class="code-typename" href="/core/image/png/#CIE_1931">CIE_1931</a>,
	b: <a class="code-typename" href="/core/image/png/#CIE_1931">CIE_1931</a>,
}</pre>
</div>
<h5>Related Procedures With Returns</h5>
<ul>
<li><a href="/core/image/png/#chrm">chrm</a></li>
</ul>
</div>
<div class="pkg-entity">
<h3 id="cHRM_Raw"><span><a class="doc-id-link" href="#cHRM_Raw">cHRM_Raw<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L101"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">cHRM_Raw :: <span class="keyword-type">struct</span> <span class="directive">#packed</span> {
	w: <a class="code-typename" href="/core/image/png/#CIE_1931_Raw">CIE_1931_Raw</a>,
	r: <a class="code-typename" href="/core/image/png/#CIE_1931_Raw">CIE_1931_Raw</a>,
	g: <a class="code-typename" href="/core/image/png/#CIE_1931_Raw">CIE_1931_Raw</a>,
	b: <a class="code-typename" href="/core/image/png/#CIE_1931_Raw">CIE_1931_Raw</a>,
}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="gAMA"><span><a class="doc-id-link" href="#gAMA">gAMA<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L117"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">gAMA :: <span class="keyword-type">struct</span> {
	gamma_100k: <a href="/base/builtin#u32be"><span class="doc-builtin">u32be</span></a>,
}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="hIST"><span><a class="doc-id-link" href="#hIST">hIST<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L65"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">hIST :: <span class="keyword-type">struct</span> <span class="directive">#packed</span> {
	entries: [256]<a href="/base/builtin#u16"><span class="doc-builtin">u16</span></a>,
	used:    <a href="/base/builtin#u16"><span class="doc-builtin">u16</span></a>,
}</pre>
</div>
<h5>Related Procedures With Returns</h5>
<ul>
<li><a href="/core/image/png/#hist">hist</a></li>
</ul>
</div>
<div class="pkg-entity">
<h3 id="iCCP"><span><a class="doc-id-link" href="#iCCP">iCCP<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L149"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">iCCP :: <span class="keyword-type">struct</span> {
	name:    <a href="/base/builtin#string"><span class="doc-builtin">string</span></a>,
	profile: []<a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a>,
}</pre>
</div>
<h5>Related Procedures With Parameters</h5>
<ul>
<li><a href="/core/image/png/#iccp_destroy">iccp_destroy</a></li>
</ul>
<h5>Related Procedures With Returns</h5>
<ul>
<li><a href="/core/image/png/#iccp">iccp</a></li>
</ul>
</div>
<div class="pkg-entity">
<h3 id="pHYs"><span><a class="doc-id-link" href="#pHYs">pHYs<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L122"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">pHYs :: <span class="keyword-type">struct</span> <span class="directive">#packed</span> {
	ppu_x: <a href="/base/builtin#u32be"><span class="doc-builtin">u32be</span></a>,
	ppu_y: <a href="/base/builtin#u32be"><span class="doc-builtin">u32be</span></a>,
	unit:  <a class="code-typename" href="/core/image/png/#pHYs_Unit">pHYs_Unit</a>,
}</pre>
</div>
<h5>Related Procedures With Parameters</h5>
<ul>
<li><a href="/core/image/png/#phys_to_dpi">phys_to_dpi</a></li>
</ul>
<h5>Related Procedures With Returns</h5>
<ul>
<li><a href="/core/image/png/#phys">phys</a></li>
</ul>
</div>
<div class="pkg-entity">
<h3 id="pHYs_Unit"><span><a class="doc-id-link" href="#pHYs_Unit">pHYs_Unit<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L129"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">pHYs_Unit :: <span class="keyword-type">enum</span> <a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a> {
	Unknown = 0, 
	Meter   = 1, 
}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="sPLT"><span><a class="doc-id-link" href="#sPLT">sPLT<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L70"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">sPLT :: <span class="keyword-type">struct</span> <span class="directive">#packed</span> {
	name:    <a href="/base/builtin#string"><span class="doc-builtin">string</span></a>,
	depth:   <a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a>,
	entries: <span class="keyword-type">union</span> {
		[][4]<a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a>, 
		[][4]<a href="/base/builtin#u16"><span class="doc-builtin">u16</span></a>, 
	},
	used:    <a href="/base/builtin#u16"><span class="doc-builtin">u16</span></a>,
}</pre>
</div>
<h5>Related Procedures With Parameters</h5>
<ul>
<li><a href="/core/image/png/#splt_destroy">splt_destroy</a></li>
</ul>
<h5>Related Procedures With Returns</h5>
<ul>
<li><a href="/core/image/png/#splt">splt</a></li>
</ul>
</div>
<div class="pkg-entity">
<h3 id="sRGB"><span><a class="doc-id-link" href="#sRGB">sRGB<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L161"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">sRGB :: <span class="keyword-type">struct</span> <span class="directive">#packed</span> {
	intent: <a class="code-typename" href="/core/image/png/#sRGB_Rendering_Intent">sRGB_Rendering_Intent</a>,
}</pre>
</div>
<h5>Related Procedures With Returns</h5>
<ul>
<li><a href="/core/image/png/#srgb">srgb</a></li>
</ul>
</div>
<div class="pkg-entity">
<h3 id="sRGB_Rendering_Intent"><span><a class="doc-id-link" href="#sRGB_Rendering_Intent">sRGB_Rendering_Intent<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L154"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">sRGB_Rendering_Intent :: <span class="keyword-type">enum</span> <a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a> {
	Perceptual            = 0, 
	Relative_colorimetric = 1, 
	Saturation            = 2, 
	Absolute_colorimetric = 3, 
}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="tIME"><span><a class="doc-id-link" href="#tIME">tIME<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L81"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">tIME :: <span class="keyword-type">struct</span> <span class="directive">#packed</span> {
	year:   <a href="/base/builtin#u16be"><span class="doc-builtin">u16be</span></a>,
	month:  <a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a>,
	day:    <a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a>,
	hour:   <a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a>,
	minute: <a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a>,
	second: <a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a>,
}</pre>
</div>
<details class="odin-doc-toggle" open>
<summary class="hideme"><span>&nbsp;</span></summary>
<p>Other chunks</p>
</details>
<h5>Related Procedures With Returns</h5>
<ul>
<li><a href="/core/image/png/#time">time</a></li>
</ul>
</div>
<h2 id="pkg-Constants" class="pkg-header">Constants</h2>
<div class="pkg-entity">
<h3 id="INCHES_PER_METER"><span><a class="doc-id-link" href="#INCHES_PER_METER">INCHES_PER_METER<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L61"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">INCHES_PER_METER :: 1000.0 / 25.4</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="MAX_CHUNK_SIZE"><span><a class="doc-id-link" href="#MAX_CHUNK_SIZE">MAX_CHUNK_SIZE<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L38"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">MAX_CHUNK_SIZE :: min(#config(PNG_MAX_CHUNK_SIZE, 16_777_216), 268_435_456)</pre>
</div>
<details class="odin-doc-toggle" open>
<summary class="hideme"><span>&nbsp;</span></summary>
<p>For chunks other than IDAT with a variable size like <code>zTXT</code> and <code>eXIf</code>,
limit their size to 16 MiB each by default. Max of 256 MiB each.</p>
</details>
</div>
<div class="pkg-entity">
<h3 id="MAX_IDAT_SIZE"><span><a class="doc-id-link" href="#MAX_IDAT_SIZE">MAX_IDAT_SIZE<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L32"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">MAX_IDAT_SIZE :: min(#config(PNG_MAX_IDAT_SIZE, _MAX_IDAT_DEFAULT), _MAX_IDAT)</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="depth_scale_table"><span><a class="doc-id-link" href="#depth_scale_table">depth_scale_table<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L1213"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">depth_scale_table: []<a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a> : []u8{0, 0xff, 0x55, 0, 0x11, 0, 0, 0, 0x01}</pre>
</div>
</div>
<h2 id="pkg-Variables" class="pkg-header">Variables</h2>
<div class="pkg-entity">
<h3 id="ADAM7_X_ORIG"><span><a class="doc-id-link" href="#ADAM7_X_ORIG">ADAM7_X_ORIG<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L165"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">ADAM7_X_ORIG: []<a href="/base/builtin#int"><span class="doc-builtin">int</span></a> = …</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="ADAM7_X_SPACING"><span><a class="doc-id-link" href="#ADAM7_X_SPACING">ADAM7_X_SPACING<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L167"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">ADAM7_X_SPACING: []<a href="/base/builtin#int"><span class="doc-builtin">int</span></a> = …</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="ADAM7_Y_ORIG"><span><a class="doc-id-link" href="#ADAM7_Y_ORIG">ADAM7_Y_ORIG<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L166"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">ADAM7_Y_ORIG: []<a href="/base/builtin#int"><span class="doc-builtin">int</span></a> = …</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="ADAM7_Y_SPACING"><span><a class="doc-id-link" href="#ADAM7_Y_SPACING">ADAM7_Y_SPACING<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L168"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">ADAM7_Y_SPACING: []<a href="/base/builtin#int"><span class="doc-builtin">int</span></a> = …</pre>
</div>
</div>
<h2 id="pkg-Procedures" class="pkg-header">Procedures</h2>
<div class="pkg-entity">
<h3 id="append_chunk"><span><a class="doc-id-link" href="#append_chunk">append_chunk<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L228"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">append_chunk :: <span class="keyword-type">proc</span>(list: ^[<span class="keyword">dynamic</span>]image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>, src: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>, allocator := <a href="/base/runtime/#Context">context.allocator</a>) -> (err: image.<a class="code-typename" href="/core/image/#Error">Error</a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="chrm"><span><a class="doc-id-link" href="#chrm">chrm<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L351"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">chrm :: <span class="keyword-type">proc</span>(c: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>) -> (res: <a class="code-typename" href="/core/image/png/#cHRM">cHRM</a>, ok: <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="chunk_type_to_name"><span><a class="doc-id-link" href="#chunk_type_to_name">chunk_type_to_name<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L317"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">chunk_type_to_name :: <span class="keyword-type">proc</span>(type: ^image.<a class="code-typename" href="/core/image/#PNG_Chunk_Type">PNG_Chunk_Type</a>) -> <a href="/base/builtin#string"><span class="doc-builtin">string</span></a> {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="copy_chunk"><span><a class="doc-id-link" href="#copy_chunk">copy_chunk<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L215"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">copy_chunk :: <span class="keyword-type">proc</span>(src: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>, allocator := <a href="/base/runtime/#Context">context.allocator</a>) -> (dest: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>, err: image.<a class="code-typename" href="/core/image/#Error">Error</a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="core_time"><span><a class="doc-id-link" href="#core_time">core_time<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L83"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">core_time :: <span class="keyword-type">proc</span>(c: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>) -> (t: time.<a class="code-typename" href="/core/time/#Time">Time</a>, ok: <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="defilter"><span><a class="doc-id-link" href="#defilter">defilter<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L1500"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">defilter :: <span class="keyword-type">proc</span>(img: ^image.<a class="code-typename" href="/core/image/#Image">Image</a>, filter_bytes: ^bytes.<a class="code-typename" href="/core/bytes/#Buffer">Buffer</a>, header: ^image.<a class="code-typename" href="/core/image/#PNG_IHDR">PNG_IHDR</a>, options: image.<a class="code-typename" href="/core/image/#Options">Options</a>) -> (err: image.<a class="code-typename" href="/core/image/#Error">Error</a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="defilter_16"><span><a class="doc-id-link" href="#defilter_16">defilter_16<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L1440"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">defilter_16 :: <span class="keyword-type">proc</span>(params: ^<a class="code-typename" href="/core/image/png/#Filter_Params">Filter_Params</a>) -> <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a> {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="defilter_8"><span><a class="doc-id-link" href="#defilter_8">defilter_8<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L1216"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">defilter_8 :: <span class="keyword-type">proc</span>(params: ^<a class="code-typename" href="/core/image/png/#Filter_Params">Filter_Params</a>) -> (ok: <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="defilter_less_than_8"><span><a class="doc-id-link" href="#defilter_less_than_8">defilter_less_than_8<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L1277"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">defilter_less_than_8 :: <span class="keyword-type">proc</span>(params: ^<a class="code-typename" href="/core/image/png/#Filter_Params">Filter_Params</a>) -> <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a> {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="destroy"><span><a class="doc-id-link" href="#destroy">destroy<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L28"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">destroy :: <span class="keyword-type">proc</span>(img: ^image.<a class="code-typename" href="/core/image/#Image">Image</a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="exif"><span><a class="doc-id-link" href="#exif">exif<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L369"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">exif :: <span class="keyword-type">proc</span>(c: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>) -> (res: <a class="code-typename" href="/core/image/png/#Exif">Exif</a>, ok: <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="filter_paeth"><span><a class="doc-id-link" href="#filter_paeth">filter_paeth<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L1188"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">filter_paeth :: <span class="keyword-type">proc</span>(left, up, up_left: <a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a>) -> <a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a> {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="gamma"><span><a class="doc-id-link" href="#gamma">gamma<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L53"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">gamma :: <span class="keyword-type">proc</span>(c: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>) -> (res: <a href="/base/builtin#f32"><span class="doc-builtin">f32</span></a>, ok: <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="hist"><span><a class="doc-id-link" href="#hist">hist<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L329"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">hist :: <span class="keyword-type">proc</span>(c: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>) -> (res: <a class="code-typename" href="/core/image/png/#hIST">hIST</a>, ok: <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="iccp"><span><a class="doc-id-link" href="#iccp">iccp<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L199"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">iccp :: <span class="keyword-type">proc</span>(c: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>) -> (res: <a class="code-typename" href="/core/image/png/#iCCP">iCCP</a>, ok: <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="iccp_destroy"><span><a class="doc-id-link" href="#iccp_destroy">iccp_destroy<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L228"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">iccp_destroy :: <span class="keyword-type">proc</span>(i: <a class="code-typename" href="/core/image/png/#iCCP">iCCP</a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="load_from_bytes"><span><a class="doc-id-link" href="#load_from_bytes">load_from_bytes<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L321"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">load_from_bytes :: <span class="keyword-type">proc</span>(data: []<a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a>, options: image.<a class="code-typename" href="/core/image/#Options">Options</a> = Options{}, allocator := <a href="/base/runtime/#Context">context.allocator</a>) -> (img: ^image.<a class="code-typename" href="/core/image/#Image">Image</a>, err: image.<a class="code-typename" href="/core/image/#Error">Error</a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="load_from_context"><span><a class="doc-id-link" href="#load_from_context">load_from_context<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L336"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">load_from_context :: <span class="keyword-type">proc</span>(ctx: ^$T, options: image.<a class="code-typename" href="/core/image/#Options">Options</a> = Options{}, allocator := <a href="/base/runtime/#Context">context.allocator</a>) -> (img: ^image.<a class="code-typename" href="/core/image/#Image">Image</a>, err: image.<a class="code-typename" href="/core/image/#Error">Error</a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="load_from_file"><span><a class="doc-id-link" href="#load_from_file">load_from_file<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png_os.odin#L8"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">load_from_file :: <span class="keyword-type">proc</span>(filename: <a href="/base/builtin#string"><span class="doc-builtin">string</span></a>, options: image.<a class="code-typename" href="/core/image/#Options">Options</a> = Options{}, allocator := <a href="/base/runtime/#Context">context.allocator</a>) -> (img: ^image.<a class="code-typename" href="/core/image/#Image">Image</a>, err: image.<a class="code-typename" href="/core/image/#Error">Error</a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="phys"><span><a class="doc-id-link" href="#phys">phys<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L63"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">phys :: <span class="keyword-type">proc</span>(c: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>) -> (res: <a class="code-typename" href="/core/image/png/#pHYs">pHYs</a>, ok: <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="phys_to_dpi"><span><a class="doc-id-link" href="#phys_to_dpi">phys_to_dpi<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L71"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">phys_to_dpi :: <span class="keyword-type">proc</span>(p: <a class="code-typename" href="/core/image/png/#pHYs">pHYs</a>) -> (x_dpi, y_dpi: <a href="/base/builtin#f32"><span class="doc-builtin">f32</span></a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="plte"><span><a class="doc-id-link" href="#plte">plte<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L247"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">plte :: <span class="keyword-type">proc</span>(c: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>) -> (res: <a class="code-typename" href="/core/image/png/#PLTE">PLTE</a>, ok: <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="read_chunk"><span><a class="doc-id-link" href="#read_chunk">read_chunk<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L172"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">read_chunk :: <span class="keyword-type">proc</span>(ctx: ^$T) -> (chunk: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>, err: image.<a class="code-typename" href="/core/image/#Error">Error</a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="read_header"><span><a class="doc-id-link" href="#read_header">read_header<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin#L244"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">read_header :: <span class="keyword-type">proc</span>(ctx: ^$T) -> (image.<a class="code-typename" href="/core/image/#PNG_IHDR">PNG_IHDR</a>, image.<a class="code-typename" href="/core/image/#Error">Error</a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="sbit"><span><a class="doc-id-link" href="#sbit">sbit<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L311"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">sbit :: <span class="keyword-type">proc</span>(c: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>) -> (res: [4]<a href="/base/builtin#u8"><span class="doc-builtin">u8</span></a>, ok: <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="splt"><span><a class="doc-id-link" href="#splt">splt<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L260"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">splt :: <span class="keyword-type">proc</span>(c: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>) -> (res: <a class="code-typename" href="/core/image/png/#sPLT">sPLT</a>, ok: <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="splt_destroy"><span><a class="doc-id-link" href="#splt_destroy">splt_destroy<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L307"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">splt_destroy :: <span class="keyword-type">proc</span>(s: <a class="code-typename" href="/core/image/png/#sPLT">sPLT</a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="srgb"><span><a class="doc-id-link" href="#srgb">srgb<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L235"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">srgb :: <span class="keyword-type">proc</span>(c: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>) -> (res: <a class="code-typename" href="/core/image/png/#sRGB">sRGB</a>, ok: <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="text"><span><a class="doc-id-link" href="#text">text<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L94"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">text :: <span class="keyword-type">proc</span>(c: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>) -> (res: <a class="code-typename" href="/core/image/png/#Text">Text</a>, ok: <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="text_destroy"><span><a class="doc-id-link" href="#text_destroy">text_destroy<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L192"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">text_destroy :: <span class="keyword-type">proc</span>(text: <a class="code-typename" href="/core/image/png/#Text">Text</a>) {…}</pre>
</div>
</div>
<div class="pkg-entity">
<h3 id="time"><span><a class="doc-id-link" href="#time">time<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin#L75"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">time :: <span class="keyword-type">proc</span>(c: image.<a class="code-typename" href="/core/image/#PNG_Chunk">PNG_Chunk</a>) -> (res: <a class="code-typename" href="/core/image/png/#tIME">tIME</a>, ok: <a href="/base/builtin#bool"><span class="doc-builtin">bool</span></a>) {…}</pre>
</div>
</div>
<h2 id="pkg-Procedure Groups" class="pkg-header">Procedure Groups</h2>
<div class="pkg-entity">
<h3 id="load"><span><a class="doc-id-link" href="#load">load<span class="a-hidden">&nbsp;¶</span></a></span><div class="doc-source"><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png_os.odin#L6"><em>Source</em></a></div></h3>
<div>
<pre class="doc-code">load :: <span class="keyword-type">proc</span>{
	<a class="code-procedure" href="/core/image/png/#load_from_file">load_from_file</a>,
	<a class="code-procedure" href="/core/image/png/#load_from_bytes">load_from_bytes</a>,
	<a class="code-procedure" href="/core/image/png/#load_from_context">load_from_context</a>,
}
</pre>
</div>
</div>
</section>
<h2 id="pkg-source-files">Source Files</h2>
<ul>
<li><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/doc.odin">doc.odin</a></li>
<li><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/helpers.odin">helpers.odin</a></li>
<li><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png.odin">png.odin</a></li>
<li><a href="https://github.com/odin-lang/Odin/tree/master/core/image/png/png_os.odin">png_os.odin</a></li>
</ul>
<h2 id="pkg-generation-information">Generation Information</h2>
<p>Generated with <code>odin version dev-2024-11 (vendor "odin") Windows_amd64 @ 2024-11-01 15:35:30.173199300 +0000 UTC</code></p>
</article>
<div class="col-lg-2 odin-toc-border navbar-light"><div class="sticky-top odin-below-navbar py-3">
<nav id="TableOfContents">
<ul>
<li><a href="#pkg-overview">Overview</a><li><a href="#pkg-Types">Types</a><ul>
<li><a href="#CIE_1931">CIE_1931</a></li>
<li><a href="#CIE_1931_Raw">CIE_1931_Raw</a></li>
<li><a href="#Error">Error</a></li>
<li><a href="#Exif">Exif</a></li>
<li><a href="#Filter_Params">Filter_Params</a></li>
<li><a href="#Image">Image</a></li>
<li><a href="#Options">Options</a></li>
<li><a href="#PLTE">PLTE</a></li>
<li><a href="#PLTE_Entry">PLTE_Entry</a></li>
<li><a href="#Row_Filter">Row_Filter</a></li>
<li><a href="#Signature">Signature</a></li>
<li><a href="#Text">Text</a></li>
<li><a href="#cHRM">cHRM</a></li>
<li><a href="#cHRM_Raw">cHRM_Raw</a></li>
<li><a href="#gAMA">gAMA</a></li>
<li><a href="#hIST">hIST</a></li>
<li><a href="#iCCP">iCCP</a></li>
<li><a href="#pHYs">pHYs</a></li>
<li><a href="#pHYs_Unit">pHYs_Unit</a></li>
<li><a href="#sPLT">sPLT</a></li>
<li><a href="#sRGB">sRGB</a></li>
<li><a href="#sRGB_Rendering_Intent">sRGB_Rendering_Intent</a></li>
<li><a href="#tIME">tIME</a></li>
</ul>
</li>
<li><a href="#pkg-Constants">Constants</a><ul>
<li><a href="#INCHES_PER_METER">INCHES_PER_METER</a></li>
<li><a href="#MAX_CHUNK_SIZE">MAX_CHUNK_SIZE</a></li>
<li><a href="#MAX_IDAT_SIZE">MAX_IDAT_SIZE</a></li>
<li><a href="#depth_scale_table">depth_scale_table</a></li>
</ul>
</li>
<li><a href="#pkg-Variables">Variables</a><ul>
<li><a href="#ADAM7_X_ORIG">ADAM7_X_ORIG</a></li>
<li><a href="#ADAM7_X_SPACING">ADAM7_X_SPACING</a></li>
<li><a href="#ADAM7_Y_ORIG">ADAM7_Y_ORIG</a></li>
<li><a href="#ADAM7_Y_SPACING">ADAM7_Y_SPACING</a></li>
</ul>
</li>
<li><a href="#pkg-Procedures">Procedures</a><ul>
<li><a href="#append_chunk">append_chunk</a></li>
<li><a href="#chrm">chrm</a></li>
<li><a href="#chunk_type_to_name">chunk_type_to_name</a></li>
<li><a href="#copy_chunk">copy_chunk</a></li>
<li><a href="#core_time">core_time</a></li>
<li><a href="#defilter">defilter</a></li>
<li><a href="#defilter_16">defilter_16</a></li>
<li><a href="#defilter_8">defilter_8</a></li>
<li><a href="#defilter_less_than_8">defilter_less_than_8</a></li>
<li><a href="#destroy">destroy</a></li>
<li><a href="#exif">exif</a></li>
<li><a href="#filter_paeth">filter_paeth</a></li>
<li><a href="#gamma">gamma</a></li>
<li><a href="#hist">hist</a></li>
<li><a href="#iccp">iccp</a></li>
<li><a href="#iccp_destroy">iccp_destroy</a></li>
<li><a href="#load_from_bytes">load_from_bytes</a></li>
<li><a href="#load_from_context">load_from_context</a></li>
<li><a href="#load_from_file">load_from_file</a></li>
<li><a href="#phys">phys</a></li>
<li><a href="#phys_to_dpi">phys_to_dpi</a></li>
<li><a href="#plte">plte</a></li>
<li><a href="#read_chunk">read_chunk</a></li>
<li><a href="#read_header">read_header</a></li>
<li><a href="#sbit">sbit</a></li>
<li><a href="#splt">splt</a></li>
<li><a href="#splt_destroy">splt_destroy</a></li>
<li><a href="#srgb">srgb</a></li>
<li><a href="#text">text</a></li>
<li><a href="#text_destroy">text_destroy</a></li>
<li><a href="#time">time</a></li>
</ul>
</li>
<li><a href="#pkg-Procedure Groups">Procedure Groups</a><ul>
<li><a href="#load">load</a></li>
</ul>
</li>
<li><a href="#pkg-source-files">Source Files</a></ul>
</nav>
</div></div>
<script type="text/javascript">var odin_pkg_name = "png";</script>
</div>

</div>
</main>

<footer class="odin-footer">
	<div class="container pb-5 pt-5">
		<div class="row g-4">
		<div class="col">
		<a class="navbar-brand" href="https://odin-lang.org">
		<img class="mb-3" src="https://odin-lang.org/logo.svg" height="30" alt="Odin"></a>
		<p>
		The Data-Oriented Language for Sane Software Development.
		</p>
		</div>
		<nav class="col-md-auto">
			<h4 class="fw-normal">Resources</h4>
			<ul class="list-unstyled">
			<li><a href="https://odin-lang.org/docs" class="link-light">Docs</a></li>
			<li><a href="https://pkg.odin-lang.org/" class="link-light">Packages</a></li>
			<li><a href="https://odin-lang.org/news" class="link-light">News</a></li>
			</ul>
		</nav>
		<nav class="col-md-auto">
			<h4 class="fw-normal">Community</h4>
			<ul class="list-unstyled">
			<li><a href="https://github.com/odin-lang/Odin" target="_blank" class="link-light">GitHub</a></li>
			<li><a href="https://discord.com/invite/sVBPHEv" target="_blank" class="link-light">Discord</a></li>
			<li><a href="https://www.twitch.tv/ginger_bill" target="_blank" class="link-light">Twitch</a></li>
			<li><a href="https://www.youtube.com/channel/UCUSck1dOH7VKmG4lRW7tZXg" target="_blank" class="link-light">YouTube</a></li>
			</ul>
		</nav>
		<nav class="col-md-auto">
			<h4 class="fw-normal">Contribute</h4>
			<ul class="list-unstyled">
			<li><a href="https://github.com/odin-lang/Odin/issues" target="_blank" class="link-light">Issues</a></li>
			<li><a href="https://www.patreon.com/gingerbill" target="_blank" class="link-light">Donate</a></li>
			</ul>
			</nav>
		</div>
		<div class="mt-4 text-muted">© 2016–2023 Ginger Bill</div>
	</div>
</footer>

<script src="https://odin-lang.org/lib/bootstrap/js/bootstrap.min.js"></script>
<script src="https://odin-lang.org/js/script.js"></script>
<script src="/pkg-data.js"></script>
<script src="/search.js"></script>
</body>
</html>
